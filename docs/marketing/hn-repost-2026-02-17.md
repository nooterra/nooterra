# HN Repost Draft (Tue 2026-02-17)

Note on compositional settlement: keep the claim narrow. Nooterra can bind a settlement to an agreement delegation graph and run deterministic pre-release checks (e.g. block cycles) with stable error codes (e.g. `AGREEMENT_DELEGATION_CYCLE`). Avoid implying multi-hop settlement is \"automatic\" beyond what the current API actually enforces.

## Locked Timing (ET / PT)

- Copy freeze: Mon 2026-02-16 21:00 ET / 18:00 PT
- Repost submission (target): Tue 2026-02-17 08:15 ET / 05:15 PT
- Live monitoring: Tue 08:15–11:30 ET (respond fast while ranking is most sensitive)
- Second sweep: Tue 18:30 ET / 15:30 PT

## Submission Details

- Type: Show HN (repost)
- Link target (pick one):
  - GitHub repo (recommended for OSS + technical audience): `README.md`
  - Blog wedge post (more narrative): `docs/blog/2026-02-14-your-ai-agent-just-spent-500-where-is-the-receipt.md`
  - Magic Link hosted demo (if we want buyer POV): TODO (add URL)
- Original HN thread (if applicable): TODO (add URL)

## Title Options (Pick 1)

1. Show HN (Repost): Nooterra – verifiable receipts for agent spend (OSS)
2. Show HN (Repost): Nooterra – verify-before-release receipts for x402-style APIs
3. Show HN (Repost): Nooterra – deterministic settlement receipts for AI agents

## OP Comment (Recommended, Short)

Hi HN,

Reposting with a tighter “try it in 10 minutes” wedge and more spec/conformance polish.

Nooterra is an open source artifact protocol + verifier for turning agent work (and its evidence) into something closer to an invoice receipt: hash-bound, signed, and offline-verifiable by someone who doesn’t trust the producer.

The quickest way to feel it is the in-repo x402 gateway demo: if an upstream returns `HTTP 402 Payment Required`, the proxy turns it into `hold -> verify -> release/refund` and emits a deterministic “receipt-like” trail (`x-nooterra-*` headers + an API query surface).

TL;DR quickstart: `npm ci && npm run quickstart:x402` (prints `OK` + `gateId=...`). Full steps: `docs/QUICKSTART_X402_GATEWAY.md`

Two important constraints up front:

- This is not a payment processor. The local demo uses `X402_AUTOFUND=1` to simulate funding so escrow holds can be created without wiring a real rail.
- The core contract is the verifiable receipt + deterministic outputs (stable warning/error codes), not “trust us, the dashboard says it passed.”

Feedback I’d love:

- If you’re shipping agents that spend money, what evidence would you require to automate payout/release?
- Where would this break in your stack: tool calls, metering, dispute windows, refunds/chargebacks, or trust bootstrapping?

## OP Comment (Longer, If Needed)

Hi HN,

Reposting: Nooterra is my attempt at a missing layer for agent workflows that spend money.

Most stacks can prove “payment happened,” but can’t produce a portable receipt for “the work happened under the agreed terms” without shipping their entire log database to the counterparty.

Nooterra (as shipped in this repo) is two things sharing the same “truth engine”:

- An open artifact protocol (bundles + manifests + attestations + receipts) that can be verified offline with explicit trust anchors.
- A hosted controller (“Magic Link”) that runs the same verifier server-side for buyer-friendly approvals and exports (optional; the hosted UI shouldn’t be the only judge).

The smallest demo wedge is the x402 gateway: put a thin proxy in front of an x402-style API. When the upstream returns `HTTP 402`, the proxy routes it through a deterministic settlement step (`hold -> verify -> release/refund`) and returns a receipt-like trail you can store for audit. Quickstart: `docs/QUICKSTART_X402_GATEWAY.md`

Notes / boundaries:

- Local mode simulates funding (`X402_AUTOFUND=1`) to make the flow runnable without a real payment rail.
- The interesting part (to me) is that verification outputs are deterministic and machine-readable with stable codes, and can be reproduced offline from the bundle.

Would love critique on whether this is the right abstraction boundary (protocol + verifier + optional controller), and what primitives are missing to make this usable in real agent payment flows.

## Defensible Claims (OK To Say)

- Offline-verifiable bundles/receipts: artifacts commit to evidence by hashes; attestations/receipts are signature-checked; verification is reproducible without trusting the producer (`docs/OVERVIEW.md`, `docs/spec/`).
- Deterministic verification outputs with stable codes (warnings/errors), suitable for CI gating and audit retention (`docs/OVERVIEW.md`, `docs/QUICKSTART_VERIFY.md`, `docs/spec/WARNINGS.md`, `docs/spec/ERRORS.md`).
- x402 “verify-before-release” wedge exists in repo and is runnable locally in ~10 minutes (`docs/QUICKSTART_X402_GATEWAY.md`).
- Escrow/ledger semantics are double-entry and tested as deterministic invariants (position as “ledger model + invariants,” not “we move real money”) (`docs/LEDGER.md`, `docs/spec/ESCROW_NETTING_INVARIANTS.md`).
- Hosted Verify Cloud is optional; protocol/verifier are the trust core (don’t claim “must use the cloud”) (`docs/OVERVIEW.md`).

## Claims To Avoid or Qualify

- “We solve payments” or “we are escrow.” Safer: “we model escrow holds and deterministic release/refund decisions; wiring real rails is a separate integration.”
- “CFO/audit-ready” as a blanket statement. Safer: “designed for audit evidence retention; produces deterministic, verifiable receipts.”
- Any “multi-hop/cascade settlement is fully implemented” wording unless we choose a tight, defensible phrasing (see TODO and options below).

## Likely HN Questions (Short Answers)

- “Why not just use Stripe Connect?”
  - Stripe moves money. Nooterra is about proving/verifying off-chain work and producing a portable, deterministic receipt that can drive a release/refund decision.
- “Why not do this as a smart contract?”
  - Smart contracts enforce on-chain state; the hard part here is verifying off-chain evidence/work completion and making that verification reproducible offline.
- “Is this centralized trust?”
  - The hosted UI is intentionally not the only judge; verification should be reproducible offline with explicit trust anchors.
- “Does the demo move real money?”
  - No; it simulates funding to make the end-to-end loop runnable locally (`X402_AUTOFUND=1`).

## Cascade Settlement (Decision Needed Before Mon 2026-02-16)

If we include anything about cascade/multi-hop settlement, pick ONE of these and stick to it:

- Option A (spec-level, safest): “We added an `AgreementDelegation.v1` primitive for linking parent/child agreements in multi-hop agent chains (provenance, depth limits, and budget-capping).”
- Option B (lightly aspirational): “We’re building toward multi-hop agent chains with compositional budget-capping and deterministic settlement; the delegation primitive is in the repo.”
- Option C (omit): Don’t mention cascade settlement at all; keep the post focused on the verifiable receipt + verify-before-release wedge.
